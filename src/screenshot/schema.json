{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "additionalProperties": false,
    "definitions": {
        "Action": {
            "anyOf": [
                {
                    "additionalProperties": false,
                    "properties": {
                        "click": {
                            "additionalProperties": false,
                            "description": "A click action triggers a click event on the selected DOM element.",
                            "properties": {
                                "selector": {
                                    "$ref": "#/definitions/Selector",
                                    "description": "The selector to click"
                                }
                            },
                            "required": [
                                "selector"
                            ],
                            "type": "object"
                        }
                    },
                    "type": "object"
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "type": {
                            "additionalProperties": false,
                            "description": "A type action triggers a type event on the selected DOM element. Use to\nsimulate typing in an input field.",
                            "properties": {
                                "selector": {
                                    "$ref": "#/definitions/Selector",
                                    "description": "The selector to type"
                                },
                                "value": {
                                    "description": "The value to type",
                                    "type": "string"
                                }
                            },
                            "required": [
                                "selector",
                                "value"
                            ],
                            "type": "object"
                        }
                    },
                    "type": "object"
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "screenshot": {
                            "additionalProperties": false,
                            "description": "The screenshot action triggers a screenshot of the current state of the\napplication.",
                            "properties": {
                                "clip": {
                                    "additionalProperties": false,
                                    "description": "The clip area within the screenshot image. The clip area is defined\nby the top-left corner (x, y) and the width and height of the clip area.",
                                    "properties": {
                                        "height": {
                                            "description": "The height of the clip area. If negative, the height is subtracted from the\nviewport height.",
                                            "type": "integer"
                                        },
                                        "width": {
                                            "description": "The width of the clip area. If negative, the width is subtracted from the\nviewport width.",
                                            "type": "integer"
                                        },
                                        "x": {
                                            "description": "The x-coordinate of the top-left corner of the clip area",
                                            "minimum": 0,
                                            "type": "integer"
                                        },
                                        "y": {
                                            "description": "The y-coordinate of the top-left corner of the clip area",
                                            "minimum": 0,
                                            "type": "integer"
                                        }
                                    },
                                    "required": [
                                        "height",
                                        "width",
                                        "x",
                                        "y"
                                    ],
                                    "type": "object"
                                },
                                "path": {
                                    "description": "The path to store the screenshot. This is the relative path used\nwithin the screenshot folder.",
                                    "type": "string"
                                },
                                "selector": {
                                    "anyOf": [
                                        {
                                            "additionalProperties": false,
                                            "properties": {
                                                "data-cy": {
                                                    "type": "string"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        {
                                            "type": "string"
                                        }
                                    ],
                                    "description": "The selector of the DOM element to capture"
                                }
                            },
                            "type": "object"
                        }
                    },
                    "type": "object"
                },
                {
                    "additionalProperties": false,
                    "properties": {
                        "highlight": {
                            "anyOf": [
                                {
                                    "additionalProperties": false,
                                    "properties": {
                                        "border": {
                                            "description": "The border style. Use any valid CSS border style.",
                                            "examples": [
                                                "1px solid red"
                                            ],
                                            "type": "string"
                                        },
                                        "selector": {
                                            "$ref": "#/definitions/Selector",
                                            "description": "The selector of the DOM element"
                                        },
                                        "styles": {
                                            "description": "The CSS styles to apply to the selected  element. Use any valid CSS styles.",
                                            "examples": [
                                                "background-color: yellow",
                                                "outline: dashed",
                                                "outline-offset: +3px"
                                            ]
                                        },
                                        "text": {
                                            "description": "The text to set in the element",
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "selector"
                                    ],
                                    "type": "object"
                                },
                                {
                                    "items": {
                                        "additionalProperties": false,
                                        "properties": {
                                            "border": {
                                                "description": "The border style. Use any valid CSS border style.",
                                                "examples": [
                                                    "1px solid red"
                                                ],
                                                "type": "string"
                                            },
                                            "selector": {
                                                "$ref": "#/definitions/Selector",
                                                "description": "The selector of the DOM element"
                                            },
                                            "styles": {
                                                "description": "The CSS styles to apply to the selected  element. Use any valid CSS styles.",
                                                "examples": [
                                                    "background-color: yellow",
                                                    "outline: dashed",
                                                    "outline-offset: +3px"
                                                ]
                                            },
                                            "text": {
                                                "description": "The text to set in the element",
                                                "type": "string"
                                            }
                                        },
                                        "required": [
                                            "selector"
                                        ],
                                        "type": "object"
                                    },
                                    "type": "array"
                                }
                            ]
                        }
                    },
                    "type": "object"
                }
            ]
        },
        "Screenshot": {
            "additionalProperties": false,
            "properties": {
                "date": {
                    "description": "The date to simulate when running the screenshot workflows",
                    "examples": [
                        "2024-09-26T19:17:35+02:00"
                    ],
                    "format": "date-time",
                    "type": "string"
                },
                "do": {
                    "anyOf": [
                        {
                            "additionalProperties": false,
                            "properties": {
                                "click": {
                                    "additionalProperties": false,
                                    "description": "A click action triggers a click event on the selected DOM element.",
                                    "properties": {
                                        "selector": {
                                            "$ref": "#/definitions/Selector",
                                            "description": "The selector to click"
                                        }
                                    },
                                    "required": [
                                        "selector"
                                    ],
                                    "type": "object"
                                }
                            },
                            "type": "object"
                        },
                        {
                            "additionalProperties": false,
                            "properties": {
                                "type": {
                                    "additionalProperties": false,
                                    "description": "A type action triggers a type event on the selected DOM element. Use to\nsimulate typing in an input field.",
                                    "properties": {
                                        "selector": {
                                            "$ref": "#/definitions/Selector",
                                            "description": "The selector to type"
                                        },
                                        "value": {
                                            "description": "The value to type",
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "selector",
                                        "value"
                                    ],
                                    "type": "object"
                                }
                            },
                            "type": "object"
                        },
                        {
                            "additionalProperties": false,
                            "properties": {
                                "screenshot": {
                                    "additionalProperties": false,
                                    "description": "The screenshot action triggers a screenshot of the current state of the\napplication.",
                                    "properties": {
                                        "clip": {
                                            "additionalProperties": false,
                                            "description": "The clip area within the screenshot image. The clip area is defined\nby the top-left corner (x, y) and the width and height of the clip area.",
                                            "properties": {
                                                "height": {
                                                    "description": "The height of the clip area. If negative, the height is subtracted from the\nviewport height.",
                                                    "type": "integer"
                                                },
                                                "width": {
                                                    "description": "The width of the clip area. If negative, the width is subtracted from the\nviewport width.",
                                                    "type": "integer"
                                                },
                                                "x": {
                                                    "description": "The x-coordinate of the top-left corner of the clip area",
                                                    "minimum": 0,
                                                    "type": "integer"
                                                },
                                                "y": {
                                                    "description": "The y-coordinate of the top-left corner of the clip area",
                                                    "minimum": 0,
                                                    "type": "integer"
                                                }
                                            },
                                            "required": [
                                                "height",
                                                "width",
                                                "x",
                                                "y"
                                            ],
                                            "type": "object"
                                        },
                                        "path": {
                                            "description": "The path to store the screenshot. This is the relative path used\nwithin the screenshot folder.",
                                            "type": "string"
                                        },
                                        "selector": {
                                            "anyOf": [
                                                {
                                                    "additionalProperties": false,
                                                    "properties": {
                                                        "data-cy": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                {
                                                    "type": "string"
                                                }
                                            ],
                                            "description": "The selector of the DOM element to capture"
                                        }
                                    },
                                    "type": "object"
                                }
                            },
                            "type": "object"
                        },
                        {
                            "additionalProperties": false,
                            "properties": {
                                "highlight": {
                                    "anyOf": [
                                        {
                                            "additionalProperties": false,
                                            "properties": {
                                                "border": {
                                                    "description": "The border style. Use any valid CSS border style.",
                                                    "examples": [
                                                        "1px solid red"
                                                    ],
                                                    "type": "string"
                                                },
                                                "selector": {
                                                    "$ref": "#/definitions/Selector",
                                                    "description": "The selector of the DOM element"
                                                },
                                                "styles": {
                                                    "description": "The CSS styles to apply to the selected  element. Use any valid CSS styles.",
                                                    "examples": [
                                                        "background-color: yellow",
                                                        "outline: dashed",
                                                        "outline-offset: +3px"
                                                    ]
                                                },
                                                "text": {
                                                    "description": "The text to set in the element",
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "selector"
                                            ],
                                            "type": "object"
                                        },
                                        {
                                            "items": {
                                                "additionalProperties": false,
                                                "properties": {
                                                    "border": {
                                                        "description": "The border style. Use any valid CSS border style.",
                                                        "examples": [
                                                            "1px solid red"
                                                        ],
                                                        "type": "string"
                                                    },
                                                    "selector": {
                                                        "$ref": "#/definitions/Selector",
                                                        "description": "The selector of the DOM element"
                                                    },
                                                    "styles": {
                                                        "description": "The CSS styles to apply to the selected  element. Use any valid CSS styles.",
                                                        "examples": [
                                                            "background-color: yellow",
                                                            "outline: dashed",
                                                            "outline-offset: +3px"
                                                        ]
                                                    },
                                                    "text": {
                                                        "description": "The text to set in the element",
                                                        "type": "string"
                                                    }
                                                },
                                                "required": [
                                                    "selector"
                                                ],
                                                "type": "object"
                                            },
                                            "type": "array"
                                        }
                                    ]
                                }
                            },
                            "type": "object"
                        },
                        {
                            "items": {
                                "$ref": "#/definitions/Action"
                            },
                            "type": "array"
                        }
                    ],
                    "description": "The actions to perform in the screenshot workflow. The last action\nis always a screenshot action. If no actions are defined or last actions is\nnot a screenshot action, a screenshot is taken of the current state of\nthe application."
                },
                "image": {
                    "description": "The name of the screenshot image as relative path",
                    "examples": [
                        "/images/cockpit/dashboard.png"
                    ],
                    "type": "string"
                },
                "language": {
                    "description": "Load Cumulocity with the given language",
                    "enum": [
                        "de",
                        "en"
                    ],
                    "type": "string"
                },
                "only": {
                    "description": "Run only this screenshot workflow and all other workflows that\nhave only setting enabled",
                    "type": "boolean"
                },
                "requires": {
                    "description": "Requires the shell application to have the a version in the given range.\nThe range must be a valid semver range. If requires is configured and shell\nversion does not fullfill the version requirement, the screenshot workflow\nwill be skipped.",
                    "examples": [
                        "1.x, ^1.0.0, >=1.0.0 <2.0.0"
                    ],
                    "format": "semver-range",
                    "type": "string"
                },
                "settings": {
                    "additionalProperties": false,
                    "description": "The configuration and settings of the screenshot",
                    "properties": {
                        "capture": {
                            "description": "The type of capturing the screenshot. When fullPage is used,\nthe application is captured in its entirety from top to bottom.\nSetting is ignored when screenshots are taken for a selected element.",
                            "enum": [
                                "fullPage",
                                "viewport"
                            ],
                            "type": "string"
                        },
                        "disableTimersAndAnimations": {
                            "description": "When true, prevents JavaScript timers (setTimeout, setInterval, etc)\nand CSS animations from running while the screenshot is taken.",
                            "type": "boolean"
                        },
                        "overwrite": {
                            "description": "Overwrite existing screenshots. By enabling this setting, existing\nscreenshots might be deleted before running the screenshot workflow.",
                            "type": "boolean"
                        },
                        "padding": {
                            "description": "The padding in px used to alter the dimensions of a screenshot of an\nelement.",
                            "minimum": 0,
                            "type": "integer"
                        },
                        "scale": {
                            "description": "Whether to scale the app to fit into the browser viewport.",
                            "type": "boolean"
                        },
                        "viewportHeight": {
                            "default": 1080,
                            "description": "The height in px to use for the browser window",
                            "minimum": 0,
                            "type": "integer"
                        },
                        "viewportWidth": {
                            "default": 1920,
                            "description": "The width in px to use for the browser window",
                            "minimum": 0,
                            "type": "integer"
                        }
                    },
                    "type": "object"
                },
                "shell": {
                    "description": "The shell is used to dermine the version of the application used by\n\"requires\" (optional)",
                    "examples": [
                        "cockpit, devicemanagement, oee"
                    ],
                    "type": "string"
                },
                "skip": {
                    "description": "Skip this screenshot workflow",
                    "type": "boolean"
                },
                "tags": {
                    "description": "Tags allow grouping and filtering of screenshots (optional)",
                    "items": {
                        "type": "string"
                    },
                    "type": "array"
                },
                "user": {
                    "description": "The login user alias. Configure *user*_username and *user*_password env\nvariables to set the actual user id and password.",
                    "examples": [
                        "admin"
                    ],
                    "type": "string"
                },
                "visit": {
                    "anyOf": [
                        {
                            "$ref": "#/definitions/Visit"
                        },
                        {
                            "type": "string"
                        }
                    ],
                    "description": "The URI to visit",
                    "examples": [
                        "/apps/cockpit/index.html#/"
                    ]
                }
            },
            "required": [
                "image",
                "visit"
            ],
            "type": "object"
        },
        "Selector": {
            "anyOf": [
                {
                    "additionalProperties": false,
                    "properties": {
                        "data-cy": {
                            "type": "string"
                        }
                    },
                    "type": "object"
                },
                {
                    "type": "string"
                }
            ]
        },
        "Visit": {
            "additionalProperties": false,
            "properties": {
                "date": {
                    "description": "The date to simulate when running the screenshot workflows",
                    "examples": [
                        "2024-09-26T19:17:35+02:00"
                    ],
                    "format": "date-time",
                    "type": "string"
                },
                "language": {
                    "description": "Load Cumulocity with the given language",
                    "enum": [
                        "de",
                        "en"
                    ],
                    "type": "string"
                },
                "selector": {
                    "default": "c8y-navigator-outlet c8y-app-icon",
                    "description": "The selector to wait for before taking the screenshot.",
                    "examples": [
                        "c8y-navigator-outlet c8y-app-icon"
                    ],
                    "type": "string"
                },
                "timeout": {
                    "description": "The timeout in ms to wait for the page to load.",
                    "examples": [
                        30000
                    ],
                    "type": "integer"
                },
                "url": {
                    "description": "The URI to visit. This should be a relative URI to the base URL.",
                    "format": "uri-reference",
                    "type": "string"
                },
                "user": {
                    "description": "The login user alias. Configure *user*_username and *user*_password env\nvariables to set the actual user id and password.",
                    "examples": [
                        "admin"
                    ],
                    "type": "string"
                }
            },
            "required": [
                "url"
            ],
            "type": "object"
        }
    },
    "properties": {
        "baseUrl": {
            "description": "The base URL used for all relative requests.",
            "format": "uri",
            "type": "string"
        },
        "global": {
            "additionalProperties": false,
            "description": "The global settings for all screenshots",
            "properties": {
                "capture": {
                    "description": "The type of capturing the screenshot. When fullPage is used,\nthe application is captured in its entirety from top to bottom.\nSetting is ignored when screenshots are taken for a selected element.",
                    "enum": [
                        "fullPage",
                        "viewport"
                    ],
                    "type": "string"
                },
                "date": {
                    "description": "The date to simulate when running the screenshot workflows",
                    "examples": [
                        "2024-09-26T19:17:35+02:00"
                    ],
                    "format": "date-time",
                    "type": "string"
                },
                "disableTimersAndAnimations": {
                    "description": "When true, prevents JavaScript timers (setTimeout, setInterval, etc)\nand CSS animations from running while the screenshot is taken.",
                    "type": "boolean"
                },
                "language": {
                    "description": "Load Cumulocity with the given language",
                    "enum": [
                        "de",
                        "en"
                    ],
                    "type": "string"
                },
                "overwrite": {
                    "description": "Overwrite existing screenshots. By enabling this setting, existing\nscreenshots might be deleted before running the screenshot workflow.",
                    "type": "boolean"
                },
                "padding": {
                    "description": "The padding in px used to alter the dimensions of a screenshot of an\nelement.",
                    "minimum": 0,
                    "type": "integer"
                },
                "requires": {
                    "description": "Requires the shell application to have the a version in the given range.\nThe range must be a valid semver range. If requires is configured and shell\nversion does not fullfill the version requirement, the screenshot workflow\nwill be skipped.",
                    "examples": [
                        "1.x, ^1.0.0, >=1.0.0 <2.0.0"
                    ],
                    "format": "semver-range",
                    "type": "string"
                },
                "scale": {
                    "description": "Whether to scale the app to fit into the browser viewport.",
                    "type": "boolean"
                },
                "shell": {
                    "description": "The shell is used to dermine the version of the application used by\n\"requires\" (optional)",
                    "examples": [
                        "cockpit, devicemanagement, oee"
                    ],
                    "type": "string"
                },
                "tags": {
                    "description": "Tags allow grouping and filtering of screenshots (optional)",
                    "items": {
                        "type": "string"
                    },
                    "type": "array"
                },
                "user": {
                    "description": "The login user alias. Configure *user*_username and *user*_password env\nvariables to set the actual user id and password.",
                    "examples": [
                        "admin"
                    ],
                    "type": "string"
                },
                "viewportHeight": {
                    "default": 1080,
                    "description": "The height in px to use for the browser window",
                    "minimum": 0,
                    "type": "integer"
                },
                "viewportWidth": {
                    "default": 1920,
                    "description": "The width in px to use for the browser window",
                    "minimum": 0,
                    "type": "integer"
                }
            },
            "type": "object"
        },
        "screenshots": {
            "description": "The screensht workflows",
            "items": {
                "$ref": "#/definitions/Screenshot"
            },
            "type": "array"
        },
        "title": {
            "description": "The title used for root group of screenshot workflows",
            "type": "string"
        }
    },
    "required": [
        "screenshots"
    ],
    "type": "object"
}

